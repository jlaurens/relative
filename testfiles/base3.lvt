\input{regression-test.tex}
\documentclass{article}
\usepackage {relative}
\input{input/expect}
\begin{document}
\START
\ExplSyntaxOn
\cs_set:Npn \myTitle #1 {
  \clist_item:Nn \c__rltv_clist {#1}:~level~\int_eval:n { #1 }
}
\ExplSyntaxOff
\newcommand\myRLTVBaseSaved{\RLTVBase}%
\newcommand\myRLTVBaseExpected{\RLTVBase}%
\input{input/base3.tex}%
\input{input/lib/base3.tex}%
\input{input/base3bis.tex}%
%
\RLTVSetBaseOfFile {3} {input/base3.tex}%
\renewcommand\myRLTVBaseExpected{3}%
\input{input/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/base3bis.tex}%
%
\RLTVSetBaseOfFile {4} {input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{3}%
\input{input/base3.tex}%
\renewcommand\myRLTVBaseExpected{4}%
\input{input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/base3bis.tex}%
%
\RLTVUnsetBaseOfFile {input/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/base3.tex}%
\renewcommand\myRLTVBaseExpected{4}%
\input{input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/base3bis.tex}%
%
\RLTVUnsetBaseOfFile {input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{\myRLTVBaseSaved}%
\input{input/base3bis.tex}%
\section<3>{Absolute level 3}
\renewcommand\myRLTVBaseExpected{3}%
\RLTVSetBaseOfFile {=} {input/lib/base3.tex}%
\input{input/lib/base3.tex}%
\renewcommand\myRLTVBaseExpected{4}%
\RLTVSetBaseOfFile {+} {input/lib/base3.tex}%
\input{input/lib/base3.tex}%
\end{document}
